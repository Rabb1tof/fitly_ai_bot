# HealthBot

Telegram-–±–æ—Ç –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –∏ wellness-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π. –ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö .NET 9 —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## –°—Ç–µ–∫
- .NET 9 (ASP.NET Core Web API)
- Entity Framework Core 9 + Npgsql
- Telegram.Bot 22.x
- Docker / Docker Compose
- PostgreSQL 16

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
- `HealthBot.Api` ‚Äî API-—Ö–æ—Å—Ç, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DI, –∑–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π.
- `HealthBot.Core` ‚Äî –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (`User`, `Reminder`, `ReminderTemplate`).
- `HealthBot.Infrastructure` ‚Äî DbContext, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Telegram-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, —Ñ–æ–Ω–æ–≤—ã–π `ReminderWorker`.
- `HealthBot.Shared` ‚Äî –æ–±—â–∏–µ –º–æ–¥–µ–ª–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example` (–µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è) –∏ —É–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```env
   TELEGRAM_BOT_TOKEN=1234567890:abcdef...
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker, Docker Compose –∏ .NET 9 SDK.

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Docker)
```bash
docker compose up -d --build
```
–°–µ—Ä–≤–∏—Å `healthbot_api` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É `healthbot`.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ConnectionStrings__Postgres`.
3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
   ```bash
   dotnet ef database update \
     -p HealthBot.Infrastructure \
     -s HealthBot.Api \
     --connection "Host=localhost;Port=5432;Database=healthbot;Username=...;Password=..."
   ```
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API:
   ```bash
   dotnet run --project HealthBot.Api
   ```

## –ú–∏–≥—Ä–∞—Ü–∏–∏
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
dotnet ef migrations add <Name> \
  -p HealthBot.Infrastructure \
  -s HealthBot.Api
```
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:
```bash
dotnet ef database update \
  -p HealthBot.Infrastructure \
  -s HealthBot.Api
```

## –õ–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–≤–æ–¥–∞, –ø–µ—Ä–µ–∫—É—Å, —Ä–∞—Å—Ç—è–∂–∫–∞) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `reminder_templates` –∏ —Å–∏–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —à–∞–±–ª–æ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram.
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞–¥–∞—é—Ç—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º.
- –§–æ–Ω–æ–≤—ã–π `ReminderWorker` —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram Bot API.

## Telegram-–∫–æ–º–∞–Ω–¥—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.
- `/menu` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –∑–∞–Ω–æ–≤–æ.
- `/cancel` ‚Äî —Å–±—Ä–æ—Å —Ç–µ–∫—É—â–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è.
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–æ–≤: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –ø–∏—Ç–∞–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ —É–¥–∞–ª—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–æ–≤—ã—Ö, —á—Ç–æ–±—ã —á–∞—Ç –æ—Å—Ç–∞–≤–∞–ª—Å—è —á–∏—Å—Ç—ã–º.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∑–æ–Ω–æ–π
- –í —Ä–∞–∑–¥–µ–ª–µ ¬´‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª ‚Üí ¬´üåç –¢–∞–π–º–∑–æ–Ω–∞¬ª –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (Europe/Moscow –∏ –¥—Ä.) –∏–ª–∏ –≤–≤–µ—Å—Ç–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—Ä—É—á–Ω—É—é.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã `Continent/City` –∏ `UTC¬±N` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UTC+3`).
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UTC, –Ω–æ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å —É—á—ë—Ç–æ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–∞–π–º–∑–æ–Ω—ã.

## –°–∫—Ä–∏–ø—Ç—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `docker compose up -d --build` ‚Äî —Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã.
- `docker compose down -v` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –æ—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Postgres.
- `dotnet build` ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏.

## TODO / –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏
- –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã.
- –†–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é `docs/` –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤ Telegram-–±–æ—Ç–∞.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å CI/CD (GitHub Actions).
