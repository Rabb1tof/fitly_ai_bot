# Анализ архитектуры HealthBot MVP

## Цели
- Telegram-бот с возможностью отправки напоминаний (приём входящих сообщений будет добавлен позже).
- Хранение данных в PostgreSQL через EF Core.
- Простые напоминания, отправляемые фоновым воркером без очередей.
- Чистая архитектура с разделением на SLN-проекты.

## Архитектурные решения
- **HealthBot.Api** — входная точка, конфигурация зависимостей и health-check эндпоинты.
- **HealthBot.Core** — доменные сущности и бизнес-правила.
- **HealthBot.Infrastructure** — работа с БД, Telegram API, фоновые сервисы.
- **HealthBot.Shared** — общие DTO и настройки.
- **PostgreSQL** как основное хранилище, Docker Compose для локального запуска.

## Потоки данных
1. Пользовательские данные и напоминания подготавливаются через внутренние сервисы (интерфейс для обработки сообщений будет добавлен позже).
2. EF Core сохраняет пользователей и напоминания в PostgreSQL.
3. `ReminderWorker` периодически извлекает напоминания из БД и отправляет сообщения через `ITelegramBotClient`.

## Технологический стек
- .NET 9
- ASP.NET Core Web API
- EF Core 9 + Npgsql
- Telegram.Bot 22.x
- Docker Compose

## Риски и ограничения
- Необходимо безопасно хранить токен Telegram (user-secrets/env, переменные Docker).
- При большом числе напоминаний возможны гонки; потребуется очереди или блокировки при масштабировании.
- Polling требует постоянного интернет-доступа и устойчивого соединения.
- Стоит добавить retry и расширенный мониторинг при усложнении.

## Возможности расширения
- Переключение между polling и webhook в зависимости от среды.
- Поддержка RabbitMQ или другого брокера.
- Интеграция LLM-сервиса.
- Redis для кэша и rate limiting.
- Админка и дополнительные сервисы.
